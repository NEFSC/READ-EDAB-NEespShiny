---
title: "`r params$species_ID`"
author: "Abigail Tyrell & Ricky Tabandera"
date: "`r format(Sys.time(), '%d %b %Y')`"
site: bookdown::bookdown_site
documentclass: book
always_allow_html: true
github-repo: NOAA-EDAB/esp_data_aggregation

html_document:
    theme: null
    mathjax: null
    self_contained: false

language:
  ui:
    chapter_name: "Section "

params: 
  species_ID: "Acadian redfish" # common name of species

  asmt_sum_source: "assessmentdata::stockAssessmentSummary"
  asmt_source: "assessmentdata::stockAssessmentData"
  survey_source: "survdat"
  
  ricky_survey_data: NEesp::bio_survey # ricky survey data
  
  save: TRUE

  cache: FALSE
  
  path: "" # figure path
  
  file: "html"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}

tab2 <- function (x, col_names = colnames(x), type = "html") 
{
    if (is.null(x) == FALSE) {
        if (nrow(x) > 0) {
            if (type == "html") {
                output <- DT::datatable(x, 
                                        class = "datatables html-widget html-widget-output shiny-bound-output",
                                        #aria-live = "polite",
                                        width = "100%",
                                        height = "100%",
                                        escape = FALSE,
                                        rownames = FALSE, 
                                        colnames = col_names,
                                        filter = list(position = "top", 
                                                      clear = FALSE),
                                        extensions = c("Responsive", "Scroller"), 
                                        options = list(search = list(regex = TRUE), 
                                                       dom = "lftipr",
                                                      deferRender = TRUE,
                                                      scrollY = 200, 
                                                      scrollX = TRUE, 
                                                      scroller = TRUE, 
                                                      destroy = TRUE,
                                                      language = list(thousands = ",")))
            }
            if (type == "word") {
                if (nrow(x) <= 60) {
                  output <- knitr::kable(x, col.names = col_names)
                }
                else {
                  output <- "More than 60 rows of data! Please see `data` folder."
                }
            }
            return(output)
        }
        else {
            print("NO DATA")
        }
    }
    else {
        print("NO DATA")
    }
}


data <- tibble::tibble("letters" = c("a", "b", "c"),
                                            "numbers" = 1:3)
tab2(data, type = params$file) 

data <- tibble::tibble("letters" = c("a", "b", "c"),
                                            "numbers" = 4:6)
tab2(data, type = params$file) 
```
